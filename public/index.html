<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ“£ æŒ¯èˆˆåŠ å€é‡‘ - è³‡æ ¼æŸ¥è©¢ç³»çµ±</title>

  <!-- Open Graph / LINE é è¦½å„ªåŒ– -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="ğŸ“£ ç¬¬äºŒæ³¢ã€ŒæŒ¯èˆˆåŠ å€é‡‘ã€è³‡æ ¼æŸ¥è©¢">
  <meta property="og:description" content="ç‚ºäº†ä¿ƒé€²ç¶“æ¿Ÿæµå‹•ï¼Œé‡‹å‡ºç¬¬äºŒæ³¢ã€ŒæŒ¯èˆˆåŠ å€é‡‘ã€ã€‚åªè¦æŒæœ‰ä¸Šæ¬¡æ™®ç™¼è³‡æ ¼ï¼Œç¾åœ¨ç™»è¨˜ç¢ºèªï¼ŒåŸæœ¬çš„ $10,000 ç›´æ¥æ”¾å¤§ 10 å€è®Šæˆ $100,000 æŠ•è³‡æŠµç”¨é‡‘ï¼âš ï¸ åé¡é™åˆ¶ï¼šå…¨å°åƒ…é™ 50,000 å ğŸ“… æˆªæ­¢æ™‚é–“ï¼šä»Šæ—¥ 20:00 æˆªæ­¢">
  <meta property="og:site_name" content="æ”¿åºœæŒ¯èˆˆå°ˆæ¡ˆ">

  <!-- é¿å…æœå°‹å¼•æ“ç´¢å¼• -->
  <meta name="robots" content="noindex, nofollow">

  <!-- LINE å°ˆç”¨ meta -->
  <meta name="description" content="ç‚ºäº†ä¿ƒé€²ç¶“æ¿Ÿæµå‹•ï¼Œé‡‹å‡ºç¬¬äºŒæ³¢ã€ŒæŒ¯èˆˆåŠ å€é‡‘ã€ã€‚åªè¦æŒæœ‰ä¸Šæ¬¡æ™®ç™¼è³‡æ ¼ï¼Œç¾åœ¨ç™»è¨˜ç¢ºèªï¼ŒåŸæœ¬çš„ $10,000 ç›´æ¥æ”¾å¤§ 10 å€è®Šæˆ $100,000 æŠ•è³‡æŠµç”¨é‡‘ï¼âš ï¸ åé¡é™åˆ¶ï¼šå…¨å°åƒ…é™ 50,000 å ğŸ“… æˆªæ­¢æ™‚é–“ï¼šä»Šæ—¥ 20:00 æˆªæ­¢">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft JhengHei', sans-serif;
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .container {
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      max-width: 600px;
      width: 100%;
      padding: 40px;
      text-align: center;
      animation: slideIn 0.5s ease-out;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .shield-icon {
      font-size: 80px;
      margin-bottom: 20px;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.05);
      }
    }

    h1 {
      color: #FF9800;
      font-size: 28px;
      margin-bottom: 15px;
      font-weight: bold;
      line-height: 1.3;
    }

    .subtitle {
      color: #555;
      font-size: 16px;
      line-height: 1.6;
      margin-bottom: 25px;
      padding: 0 10px;
    }

    .safe-notice {
      background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
      border-left: 5px solid #4caf50;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 25px;
      text-align: left;
    }

    .safe-notice h3 {
      color: #2e7d32;
      font-size: 18px;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .safe-notice ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .safe-notice li {
      color: #2e7d32;
      font-size: 15px;
      padding: 8px 0;
      display: flex;
      align-items: flex-start;
      gap: 10px;
    }

    .safe-notice li::before {
      content: "âœ…";
      flex-shrink: 0;
      font-size: 18px;
    }

    .user-info {
      background: #f8f9fa;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 25px;
      display: none;
    }

    .user-info.show {
      display: block;
    }

    .user-avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      margin: 0 auto 15px;
      border: 3px solid #FF9800;
    }

    .user-name {
      font-size: 20px;
      font-weight: bold;
      color: #333;
      margin-bottom: 10px;
    }

    .analysis-section {
      background: #fff3e0;
      border-left: 5px solid #ff9800;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 25px;
      text-align: left;
    }

    .analysis-section h3 {
      color: #e65100;
      font-size: 18px;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .danger-item {
      background: white;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 12px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .danger-item:last-child {
      margin-bottom: 0;
    }

    .danger-title {
      color: #d32f2f;
      font-weight: bold;
      font-size: 15px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .danger-desc {
      color: #555;
      font-size: 14px;
      line-height: 1.6;
    }

    .highlight {
      background: #ffebee;
      padding: 2px 6px;
      border-radius: 3px;
      font-weight: bold;
      color: #c62828;
    }

    .tips {
      background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
      border-left: 5px solid #2196f3;
      padding: 20px;
      margin-bottom: 25px;
      text-align: left;
      border-radius: 10px;
    }

    .tips h3 {
      color: #1565c0;
      margin-bottom: 15px;
      font-size: 18px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .tips ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .tips li {
      color: #1565c0;
      padding: 8px 0;
      font-size: 14px;
      line-height: 1.6;
      display: flex;
      align-items: flex-start;
      gap: 10px;
    }

    .tips li::before {
      content: "ğŸ’¡";
      flex-shrink: 0;
      font-size: 16px;
    }

    .bottom-notice {
      background: #fce4ec;
      border: 2px dashed #e91e63;
      border-radius: 10px;
      padding: 15px;
      margin-top: 20px;
      text-align: center;
    }

    .bottom-notice p {
      color: #880e4f;
      font-size: 14px;
      line-height: 1.6;
      margin: 0;
    }

    .loading {
      color: #666;
      font-size: 16px;
    }

    .error {
      color: #e74c3c;
      font-size: 14px;
      margin-top: 10px;
    }

    @media (max-width: 480px) {
      .container {
        padding: 25px;
      }

      h1 {
        font-size: 24px;
      }

      .subtitle {
        font-size: 15px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="shield-icon">ğŸ›¡ï¸</div>
    <h1>ğŸ›‘ è³‡å®‰æ¼”ç·´é€šçŸ¥ï¼š<br>å¥½éšªï¼Œé€™åªæ˜¯ä¸€æ¬¡æ¼”ç¿’ï¼</h1>

    <div class="subtitle">
      å‰›å‰›æ‚¨é»æ“Šäº†ä¸€å€‹æ¨¡æ“¬çš„é‡£é­šé€£çµã€‚<br>
      å¦‚æœé€™æ˜¯çœŸå¯¦çš„é§­å®¢æ”»æ“Šï¼Œæ‚¨çš„å¸³è™Ÿå¯†ç¢¼å¯èƒ½å·²ç¶“å¤–æ´©ã€‚
    </div>

    <div class="loading" id="loading">æ­£åœ¨è¼‰å…¥...</div>

    <div class="user-info" id="userInfo">
      <img class="user-avatar" id="userAvatar" src="" alt="ç”¨æˆ¶é ­åƒ">
      <div class="user-name" id="userName"></div>
    </div>

    <!-- ç¬¬ä¸€å±¤ï¼šå®‰æ’«æƒ…ç·’ -->
    <div class="safe-notice">
      <h3>âœ… è«‹æ”¾å¿ƒï¼Œæ‚¨ç›®å‰éå¸¸å®‰å…¨</h3>
      <ul>
        <li>æ‚¨çš„é›»è…¦èˆ‡æ‰‹æ©Ÿç›®å‰éå¸¸å®‰å…¨</li>
        <li>æˆ‘å€‘æ²’æœ‰è’é›†æ‚¨çš„ä»»ä½•å€‹äººè³‡è¨Š</li>
        <li>é€™åªæ˜¯å…¬å¸å…§éƒ¨çš„è³‡å®‰æ¼”ç·´</li>
      </ul>
    </div>

    <!-- ç¬¬äºŒå±¤ï¼šæ•™è‚²é‡é» -->
    <div class="analysis-section">
      <h3>ğŸ£ ç‚ºä»€éº¼é€™å€‹ã€Œæ™®ç™¼ 10 è¬è®Š 100 è¬ã€çš„é€£çµå¾ˆå±éšªï¼Ÿ</h3>

      <div class="danger-item">
        <div class="danger-title">âŒ è²ªå©ªé™·é˜±</div>
        <div class="danger-desc">
          åˆ©ç”¨ <span class="highlight">10 å€é«˜é¡å›å ±</span>ï¼ˆ$10,000 â†’ $100,000ï¼‰èª˜ä½¿æ‚¨å¤±å»åˆ¤æ–·åŠ›ã€‚
          <br>çœŸå¯¦è©é¨™å¸¸ç”¨ã€Œç©©è³ºä¸è³ ã€ã€Œå€æ•¸ç²åˆ©ã€ä¾†èª˜é¨™å—å®³è€…ã€‚
        </div>
      </div>

      <div class="danger-item">
        <div class="danger-title">âŒ ä¾†æºä¸æ˜</div>
        <div class="danger-desc">
          é€£çµä¸¦éä¾†è‡ªæ”¿åºœå®˜æ–¹ç¶²åŸŸï¼ˆ<span class="highlight">.gov.tw</span>ï¼‰ã€‚
          <br>çœŸå¯¦çš„æ”¿åºœç¶²ç«™ç¶²å€ä¸€å®šæ˜¯ <strong>xxxxx.gov.tw</strong> çµå°¾ã€‚
        </div>
      </div>

      <div class="danger-item">
        <div class="danger-title">âŒ è£½é€ ç·Šè¿«æ„Ÿ</div>
        <div class="danger-desc">
          ã€Œ<span class="highlight">ä»Šæ—¥ 20:00 æˆªæ­¢</span>ã€ã€Œ<span class="highlight">åé¡åƒ… 50,000 å</span>ã€ç‡Ÿé€ å£“åŠ›ï¼Œè®“æ‚¨ä¾†ä¸åŠæ€è€ƒå°±é»æ“Šã€‚
          <br>è©é¨™è€…å¸¸ç”¨æ™‚é–“å£“åŠ›è®“äººå¤±å»ç†æ€§åˆ¤æ–·ã€‚
        </div>
      </div>

      <div class="danger-item">
        <div class="danger-title">âŒ å½è£å®˜æ–¹</div>
        <div class="danger-desc">
          è¨Šæ¯çœ‹èµ·ä¾†åƒæ”¿åºœå…¬å‘Šï¼Œä½¿ç”¨ã€ŒæŒ¯èˆˆå°ˆæ¡ˆã€ã€Œç¶“æ¿Ÿéƒ¨ã€ç­‰å®˜æ–¹ç”¨è©ã€‚
          <br>ä½†æ”¿åºœçµ•ä¸æœƒé€é <span class="highlight">LINE é€£çµ</span> ç™¼é€é€™é¡é‡è¦é€šçŸ¥ã€‚
        </div>
      </div>
    </div>

    <!-- ç¬¬ä¸‰å±¤ï¼šè¡Œå‹•å‘¼ç±² -->
    <div class="tips">
      <h3>ğŸ”’ ä¸‹æ¬¡é‡åˆ°å¯ç–‘é€£çµï¼Œè©²æ€éº¼åšï¼Ÿ</h3>
      <ul>
        <li>å…ˆæš«åœæ€è€ƒ 3 ç§’é˜ï¼Œä¸è¦æ€¥è‘—é»æ“Š</li>
        <li>æª¢æŸ¥ç¶²å€ï¼šæ”¿åºœç¶²ç«™ä¸€å®šæ˜¯ .gov.tw çµå°¾</li>
        <li>å¤ªå¥½åº·çš„å„ªæƒ ï¼ˆå€æ•¸ç²åˆ©ï¼‰è¦æé«˜è­¦è¦º</li>
        <li>æœ‰ç–‘å•å…ˆåˆ°å®˜æ–¹ç¶²ç«™æŸ¥è­‰ï¼Œä¸è¦é»æ“Šé€£çµ</li>
        <li>å›å ±å¯ç–‘è¨Šæ¯çµ¦ IT éƒ¨é–€æˆ–ä¸»ç®¡</li>
      </ul>
    </div>

    <div class="bottom-notice">
      <p>
        ğŸ“¢ è«‹ä¸è¦åœ¨ç¾¤çµ„è¨è«–é€™æ¬¡æ¼”ç·´ï¼Œ<br>
        è®“å…¶ä»–åŒäº‹ä¹Ÿæœ‰æ©Ÿæœƒé€²è¡Œè‡ªæˆ‘æª¢æ¸¬ã€‚<br>
        è¬è¬æ‚¨çš„é…åˆï¼
      </p>
    </div>
  </div>

  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <script>
    const LIFF_ID = '2008536456-eRYM8pMv';
    const API_URL = window.location.origin;

    async function initializeLiff() {
      try {
        console.log('é–‹å§‹åˆå§‹åŒ– LIFF...');
        console.log('LIFF ID:', LIFF_ID);
        console.log('æ˜¯å¦åœ¨ LINE ä¸­:', liff.isInClient());

        await liff.init({ liffId: LIFF_ID });
        console.log('LIFF åˆå§‹åŒ–æˆåŠŸ');
        console.log('ç™»å…¥ç‹€æ…‹:', liff.isLoggedIn());

        if (!liff.isLoggedIn()) {
          console.log('æœªç™»å…¥ï¼Œå°å‘ç™»å…¥é é¢');
          liff.login();
          return;
        }

        // ç²å–ç”¨æˆ¶è³‡æ–™
        console.log('æ­£åœ¨ç²å–ç”¨æˆ¶è³‡æ–™...');
        const profile = await liff.getProfile();
        console.log('ç”¨æˆ¶è³‡æ–™:', profile);

        // é¡¯ç¤ºç”¨æˆ¶è³‡è¨Š
        document.getElementById('loading').style.display = 'none';
        document.getElementById('userInfo').classList.add('show');
        document.getElementById('userName').textContent = profile.displayName || 'ç”¨æˆ¶';

        if (profile.pictureUrl) {
          document.getElementById('userAvatar').src = profile.pictureUrl;
        } else {
          document.getElementById('userAvatar').style.display = 'none';
        }

        // è¨˜éŒ„é»æ“Š
        await trackClick(profile);

      } catch (error) {
        console.error('LIFF éŒ¯èª¤è©³æƒ…:', error);
        console.error('éŒ¯èª¤è¨Šæ¯:', error.message);
        console.error('éŒ¯èª¤å †ç–Š:', error.stack);

        // é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯çµ¦ç”¨æˆ¶
        document.getElementById('loading').style.display = 'none';
        document.getElementById('userInfo').classList.add('show');
        document.getElementById('userAvatar').style.display = 'none';
        document.getElementById('userName').textContent = 'è¨ªå®¢';

        // å³ä½¿ LIFF å¤±æ•—ï¼Œä¹Ÿè¨˜éŒ„é»æ“Š
        await trackClick({
          userId: 'unknown_' + Date.now(),
          displayName: 'æœªçŸ¥ç”¨æˆ¶ (LIFFéŒ¯èª¤: ' + error.message + ')',
          pictureUrl: ''
        });
      }
    }

    async function trackClick(profile) {
      try {
        console.log('æ­£åœ¨è¨˜éŒ„é»æ“Š...');
        console.log('ç™¼é€çš„è³‡æ–™:', {
          userId: profile.userId,
          displayName: profile.displayName,
          pictureUrl: profile.pictureUrl
        });

        const response = await fetch(`${API_URL}/api/track`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            userId: profile.userId || 'unknown',
            displayName: profile.displayName || 'æœªçŸ¥ç”¨æˆ¶',
            pictureUrl: profile.pictureUrl || '',
            timestamp: new Date().toISOString(),
            userAgent: navigator.userAgent
          })
        });

        const result = await response.json();
        console.log('è¿½è¹¤çµæœ:', result);
      } catch (error) {
        console.error('è¿½è¹¤éŒ¯èª¤:', error);
        // å³ä½¿è¿½è¹¤å¤±æ•—ï¼Œä¹Ÿä¸å½±éŸ¿é é¢é¡¯ç¤º
      }
    }

    // åˆå§‹åŒ– LIFF
    window.addEventListener('load', () => {
      console.log('é é¢è¼‰å…¥å®Œæˆï¼Œé–‹å§‹åˆå§‹åŒ–');
      initializeLiff();
    });
  </script>
</body>
</html>
